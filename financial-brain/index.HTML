<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Brain V3 - Premium Strategic Blueprint</title>
    <!-- Standalone Dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com/3.4.1"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
        
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background-color: #000a0a; 
            margin: 0; 
            overflow-x: hidden; 
            color: #f8fafc; 
        }

        .animate-fade-in-up { animation: fade-in-up 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        .animate-slide-in { animation: slide-in 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        @keyframes fade-in-up { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slide-in { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }

        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(20, 184, 166, 0.3); border-radius: 10px; }
        
        .shadow-glow { box-shadow: 0 0 50px rgba(20, 184, 166, 0.2); }
        .no-spinners::-webkit-inner-spin-button, .no-spinners::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
        .no-spinners { -moz-appearance: textfield; }

        .premium-input { 
            background: rgba(15, 23, 42, 0.8); 
            border: 1px solid rgba(148, 163, 184, 0.2); 
            transition: all 0.2s ease; 
        }
        .premium-input:focus { 
            border-color: #14b8a6; 
            background: rgba(15, 23, 42, 0.95); 
            box-shadow: 0 0 10px rgba(20, 184, 166, 0.1); 
        }

        .allocation-input { 
            background: rgba(15, 23, 42, 0.9) !important; 
            color: #ffffff !important; 
            border: 1px solid rgba(148, 163, 184, 0.3) !important;
            font-weight: 800 !important; 
        }

        .fixed-taskbar {
            position: fixed;
            left: 0;
            right: 0;
            top: 0;
            z-index: 1000;
        }

        .center-glow {
            position: relative;
        }
        .center-glow::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 140%;
            height: 140%;
            background: radial-gradient(circle, rgba(20, 184, 166, 0.25) 0%, transparent 75%);
            z-index: -1;
            animation: pulse-glow 4s infinite ease-in-out;
        }

        @keyframes pulse-glow {
            0%, 100% { opacity: 0.4; transform: translate(-50%, -50%) scale(1); }
            50% { opacity: 0.8; transform: translate(-50%, -50%) scale(1.1); }
        }

        @media print {
            .no-print { display: none !important; }
            .print-only { display: block !important; }
            body { background-color: #ffffff !important; color: black !important; }
            .glass-card { 
                box-shadow: none !important; 
                border: 1px solid #ddd !important; 
                background: white !important; 
                color: black !important;
                break-inside: avoid;
                padding: 24px !important;
                margin-bottom: 24px;
            }
            .bg-slate-900, .bg-slate-950, .bg-slate-800 { background: #fdfdfd !important; border: 1px solid #ddd !important; color: black !important; }
            .text-white, .text-slate-100, .text-slate-200, .text-slate-300, .text-slate-400 { color: black !important; }
            .text-teal-400, .text-emerald-400 { color: #0f766e !important; font-weight: bold !important; }
            .text-rose-400 { color: #be123c !important; }
            .fixed.inset-0 { display: none !important; }
            nav, button, .bottom-taskbar, .no-print { display: none !important; }
            * { -webkit-print-color-adjust: exact !important; printer-colors: exact !important; color-adjust: exact !important; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef } = React;

        // --- 1. Global Data ---
        const ASSET_CLASSES = [
            { id: "mfPool", label: "Mutual Funds", rate: 12, icon: "coins" },
            { id: "stockPool", label: "Stocks", rate: 15, icon: "line-chart" },
            { id: "debtPool", label: "Debt Pool", rate: 8, icon: "landmark" },
            { id: "cashBank", label: "Cash / Bank", rate: 4, icon: "wallet" },
            { id: "fdPool", label: "Fixed Deposits", rate: 7, icon: "lock" },
            { id: "realAssets", label: "Real Assets", rate: 10, icon: "building" }
        ];

        const HD_KEYWORDS = [
            { label: "Protection", icon: "shield-check" },
            { label: "Planning", icon: "scroll-text" },
            { label: "Mutual Fund", icon: "coins" },
            { label: "Insurance", icon: "shield" },
            { label: "FD", icon: "lock" },
            { label: "Stocks", icon: "line-chart" },
            { label: "Wealth", icon: "gem" },
            { label: "Portfolio", icon: "trending-up" },
            { label: "Retirement", icon: "umbrella" },
            { label: "SIP", icon: "refresh-cw" },
            { label: "Lumpsum", icon: "wallet" },
            { label: "Asset", icon: "landmark" },
            { label: "Freedom", icon: "flag" },
            { label: "Growth", icon: "activity" },
            { label: "Strategy", icon: "brain" },
            { label: "Blueprint", icon: "clipboard-list" }
        ];

        const QUICK_GOALS = ["Home", "Car", "Wedding", "World Tour", "Renovation", "Luxury", "Health", "Skills", "Business", "Emergency", "Debt"];
        const BASE_MILESTONES = [
            { title: "10th Standard", age: 15, defaultCost: 250000 },
            { title: "12th Standard", age: 17, defaultCost: 350000 },
            { title: "College Degree", age: 18, defaultCost: 1500000 },
            { title: "Marriage", age: 25, defaultCost: 2500000 }
        ];

        // --- 2. Shared Utilities ---
        function calculateStepUpSip(targetValue, years, annualReturn, stepUpRate, lumpsum = 0) {
            const yrs = Number(years);
            if (yrs <= 0) return 0;
            const r = (Number(annualReturn) || 12) / 100 / 12;
            const g = (Number(stepUpRate) || 0) / 100;
            const n = Math.max(1, yrs * 12);
            const fvLumpsum = Number(lumpsum || 0) * Math.pow(1 + r, n);
            const neededFromSip = Math.max(0, Number(targetValue || 0) - fvLumpsum);
            if (neededFromSip <= 0) return 0;
            let low = 0, high = Math.max(neededFromSip, 1000000000);
            for (let i = 0; i < 40; i++) {
                let initialSip = (low + high) / 2;
                let currentMonthlySip = initialSip, totalValue = 0;
                for (let month = 1; month <= n; month++) {
                    totalValue = (totalValue + currentMonthlySip) * (1 + r);
                    if (month % 12 === 0) currentMonthlySip = currentMonthlySip * (1 + g);
                }
                if (totalValue < neededFromSip) low = initialSip; else high = initialSip;
            }
            return high;
        }

        // --- 3. Atomic Components (Strict Definition Order) ---

        function Icon({ name, size = 18, className = "" }) {
            useEffect(() => { if(window.lucide) lucide.createIcons(); }, [name]);
            return <i data-lucide={name} style={{ width: size, height: size }} className={className}></i>;
        }

        function GlassCard({ children, className = "" }) {
            return (
                <div className={`bg-slate-900/80 backdrop-blur-md border border-white/10 rounded-[24px] shadow-2xl overflow-hidden relative glass-card ${className}`}>
                    <div className="absolute inset-0 opacity-[0.02] pointer-events-none" style={{ backgroundImage: `url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")` }}></div>
                    {children}
                </div>
            );
        }

        function AnimatedValue({ value, prefix = "", suffix = "", decimals = 0 }) {
            const [display, setDisplay] = useState(0);
            useEffect(() => {
                let start = display;
                const end = Number(value) || 0;
                const duration = 1000;
                const startTime = performance.now();
                const animate = (now) => {
                    const timeFraction = (now - startTime) / duration;
                    if (timeFraction > 1) { setDisplay(end); return; }
                    const progress = 1 - Math.pow(1 - timeFraction, 3);
                    setDisplay(start + (end - start) * progress);
                    requestAnimationFrame(animate);
                };
                requestAnimationFrame(animate);
            }, [value]);
            return <span>{prefix}{display.toLocaleString('en-IN', { maximumFractionDigits: decimals, minimumFractionDigits: decimals })}{suffix}</span>;
        }

        function InteractiveHDBackground() {
            const containerRef = useRef(null);
            const requestRef = useRef();
            const mouse = useRef({ x: window.innerWidth / 2, y: window.innerHeight / 2 });
            const elements = useRef([]);

            useEffect(() => {
                const rows = 6;
                const cols = 7;
                const cellW = window.innerWidth / cols;
                const cellH = window.innerHeight / rows;

                elements.current = Array.from({ length: 42 }).map((_, i) => {
                    const r = i % rows;
                    const c = Math.floor(i / rows);
                    const node = HD_KEYWORDS[i % HD_KEYWORDS.length];
                    return {
                        ...node,
                        x: c * cellW + (Math.random() * 50),
                        y: r * cellH + (Math.random() * 50),
                        vx: (Math.random() - 0.5) * 0.3,
                        vy: (Math.random() - 0.5) * 0.3,
                        angle: 0,
                        baseSize: Math.random() * 0.2 + 0.9
                    };
                });

                const handleMove = (e) => { mouse.current = { x: e.clientX, y: e.clientY }; };
                window.addEventListener('mousemove', handleMove);

                const animate = () => {
                    if (containerRef.current) {
                        const centerX = window.innerWidth / 2;
                        const centerY = window.innerHeight / 2;
                        const shiftX = (mouse.current.x - centerX) * -0.05;
                        const shiftY = (mouse.current.y - centerY) * -0.05;
                        containerRef.current.style.transform = `translate(${shiftX}px, ${shiftY}px)`;

                        const domNodes = containerRef.current.children;
                        for (let i = 0; i < elements.current.length; i++) {
                            let el = elements.current[i];
                            const node = domNodes[i];
                            
                            const dx = el.x - (mouse.current.x - shiftX);
                            const dy = el.y - (mouse.current.y - shiftY);
                            const dist = Math.sqrt(dx*dx + dy*dy);
                            if (dist < 300) {
                                const angle = Math.atan2(dy, dx);
                                const force = (300 - dist) / 300;
                                el.vx += Math.cos(angle) * force * 2.5; 
                                el.vy += Math.sin(angle) * force * 2.5;
                            }

                            for (let j = 0; j < elements.current.length; j++) {
                                if (i === j) continue;
                                const other = elements.current[j];
                                const nDist = Math.sqrt(Math.pow(el.x - other.x, 2) + Math.pow(el.y - other.y, 2));
                                if (nDist < 180) {
                                    const nAngle = Math.atan2(el.y - other.y, el.x - other.x);
                                    el.vx += Math.cos(nAngle) * 0.15;
                                    el.vy += Math.sin(nAngle) * 0.15;
                                }
                            }

                            el.x += el.vx; el.y += el.vy;
                            el.vx *= 0.96; el.vy *= 0.96;

                            const pad = 100;
                            if (el.x < -pad) el.x = window.innerWidth + pad;
                            if (el.x > window.innerWidth + pad) el.x = -pad;
                            if (el.y < -pad) el.y = window.innerHeight + pad;
                            if (el.y > window.innerHeight + pad) el.y = -pad;

                            if (node) node.style.transform = `translate(${el.x}px, ${el.y}px)`;
                        }
                    }
                    requestRef.current = requestAnimationFrame(animate);
                };
                requestRef.current = requestAnimationFrame(animate);
                return () => {
                    window.removeEventListener('mousemove', handleMove);
                    cancelAnimationFrame(requestRef.current);
                };
            }, []);

            return (
                <div ref={containerRef} className="fixed inset-0 pointer-events-none z-0 overflow-hidden no-print transition-transform duration-500 ease-out">
                    {Array.from({ length: 42 }).map((_, i) => (
                        <div key={i} className="absolute will-change-transform">
                            <div className="flex items-center gap-4 px-8 py-4 rounded-full bg-slate-900/90 backdrop-blur-xl border border-white/20 shadow-2xl opacity-70">
                                <Icon name={HD_KEYWORDS[i % HD_KEYWORDS.length].icon} size={22} className="text-teal-400" />
                                <span className="text-white font-black text-sm whitespace-nowrap uppercase tracking-[0.2em]">{HD_KEYWORDS[i % HD_KEYWORDS.length].label}</span>
                            </div>
                        </div>
                    ))}
                </div>
            );
        }

        function ProfileInput({ label, value, onChange, iconName, type = "text", placeholder, insight, maxLen, isWhite, fixedRate }) {
            return (
                <div className="space-y-1">
                    <div className="flex justify-between items-end">
                        <label className="text-[10px] font-bold uppercase text-slate-400 ml-1 tracking-wider leading-none uppercase">{label}</label>
                        {fixedRate && <span className="text-[9px] font-black text-teal-400 bg-teal-400/10 px-2 py-0.5 rounded uppercase">Ret: {fixedRate}%</span>}
                    </div>
                    <div className="relative">
                        <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-teal-500">
                            <Icon name={iconName} size={16} />
                        </div>
                        <input
                            type={type}
                            value={value === undefined || value === 0 ? '' : value}
                            onChange={(e) => {
                                if (maxLen && e.target.value.length > maxLen) return;
                                onChange(e.target.value);
                            }}
                            placeholder={placeholder}
                            className={`w-full ${isWhite ? 'allocation-input' : 'premium-input'} text-white rounded-xl py-3 pl-10 pr-4 focus:ring-1 focus:ring-teal-500/50 outline-none placeholder-slate-600 no-spinners text-sm shadow-sm transition-all`}
                        />
                    </div>
                    {insight && <p className="text-[9px] font-medium italic text-teal-400 ml-1 flex items-center gap-1 leading-none pt-0.5"><Icon name="sparkles" size={10} /> {insight}</p>}
                </div>
            );
        }

        function ToggleInput({ label, value, onChange, iconName }) {
            return (
                <div className="flex items-center justify-between p-2.5 bg-slate-800/30 border border-slate-700/50 rounded-xl">
                    <div className="flex items-center gap-2.5">
                        <div className="text-teal-400"><Icon name={iconName} size={18} /></div>
                        <span className="text-slate-300 font-bold text-[11px] uppercase tracking-wider">{label}</span>
                    </div>
                    <div className="flex bg-slate-950 rounded-lg p-0.5 border border-slate-800 shadow-inner">
                        <button type="button" onClick={() => onChange(true)} className={`px-4 py-1.5 rounded-md text-[10px] font-black transition-all ${value === true ? 'bg-teal-600 text-white shadow-lg' : 'text-slate-500'}`}>Yes</button>
                        <button type="button" onClick={() => onChange(false)} className={`px-4 py-1.5 rounded-md text-[10px] font-black transition-all ${value === false ? 'bg-teal-600 text-white shadow-lg' : 'text-slate-500'}`}>No</button>
                    </div>
                </div>
            );
        }

        function BottomTaskbar({ onNext, onBack, showBack, progress, label="Continue" }) {
            return (
                <div className="fixed bottom-0 left-0 right-0 z-[1000] bg-slate-950/90 backdrop-blur-xl border-t border-white/10 px-6 py-3 shadow-[0_-10px_30px_rgba(0,0,0,0.5)] no-print">
                    <div className="max-w-5xl mx-auto flex items-center justify-between gap-6">
                        <div className="flex-1 flex items-center gap-6 max-w-sm">
                            <div className="w-full">
                                <div className="flex justify-between items-end mb-1.5">
                                    <span className="text-[9px] font-bold uppercase text-slate-400 tracking-widest leading-none">Protocol Progress</span>
                                    <span className="text-xs font-black text-teal-400 leading-none">{progress}%</span>
                                </div>
                                <div className="w-full h-1 bg-slate-800 rounded-full overflow-hidden">
                                    <div className="h-full bg-gradient-to-r from-teal-600 to-teal-400 transition-all duration-700 ease-out" style={{ width: `${progress}%` }} />
                                </div>
                            </div>
                        </div>
                        <div className="flex items-center gap-3">
                            {showBack && (
                                <button onClick={onBack} className="h-10 w-10 flex items-center justify-center rounded-xl bg-slate-900 border border-white/10 text-slate-300 hover:text-white transition-all active:scale-95 hover:border-white/20">
                                    <Icon name="arrow-left" size={18} />
                                </button>
                            )}
                            <button onClick={onNext} className="h-10 px-8 bg-teal-600 hover:bg-teal-500 text-white rounded-xl font-bold text-xs flex items-center gap-2 transition-all active:scale-95 shadow-lg shadow-teal-500/20 uppercase tracking-widest">
                                <span>{label}</span>
                                <Icon name="arrow-right" size={16} />
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        function LedgerRowComponent({ icon, milestone, corpus, sip, cumulativeSip, onClick, isExpanded }) {
            return (
                <div onClick={onClick} className={`grid grid-cols-4 items-center p-4 rounded-3xl cursor-pointer transition-all border ${isExpanded ? 'bg-white/10 border-teal-500/30 shadow-glow' : 'bg-slate-900/60 border-transparent hover:bg-slate-800'} group`}>
                    <div className="flex items-center gap-3">
                        <div className="p-2 bg-teal-500/10 text-teal-400 rounded-lg group-hover:bg-teal-50 group-hover:text-slate-950 transition-all"><Icon name={icon} size={18} /></div>
                        <span className="text-xs font-bold text-slate-200 uppercase tracking-tight truncate">{String(milestone)}</span>
                    </div>
                    <div className="text-right pr-2 uppercase"><span className="text-sm font-black text-slate-300">₹{Math.round(corpus).toLocaleString('en-IN')}</span></div>
                    <div className="text-right pr-2 uppercase"><span className="text-sm font-black text-teal-400">₹{Math.round(sip).toLocaleString('en-IN')}</span></div>
                    <div className="text-right uppercase"><span className="text-[10px] font-bold text-slate-500 tracking-wider uppercase">₹{Math.round(cumulativeSip).toLocaleString('en-IN')}</span></div>
                </div>
            );
        }

        function FullJourneySchedule({ startAge, endAge, initialSip, stepUpRate, expectedReturn, outflows, lumpsum = 0 }) {
            const [expandedYear, setExpandedYear] = useState(null);
            const r = (Number(expectedReturn) || 12) / 100 / 12;
            const g = (Number(stepUpRate) || 0) / 100;
            const years = Math.max(0, Number(endAge) - Number(startAge));
            const schedule = [];
            let currentPortfolio = Number(lumpsum);
            let currentMonthlySip = Number(initialSip);

            for (let yr = 0; yr <= years; yr++) {
                const age = Number(startAge) + yr;
                const yearOutflowData = outflows[yr] || { total: 0, goals: [] };
                const yearOutflow = yearOutflowData.total;
                const monthlyDetails = [];
                let monthOpening = currentPortfolio;
                for (let m = 1; m <= 12; m++) {
                    const contribution = currentMonthlySip;
                    const interest = (monthOpening + contribution) * r;
                    const closing = monthOpening + contribution + interest;
                    monthlyDetails.push({ month: m, opening: monthOpening, contribution, interest, closing, withdrawal: m === 12 ? yearOutflow : 0 });
                    monthOpening = closing;
                }
                const yearEndBalance = Math.max(0, monthOpening - yearOutflow);
                schedule.push({ year: yr + 1, age, yearlySipTotal: currentMonthlySip * 12, portfolio: yearEndBalance, outflow: yearOutflow, withdrawalGoals: yearOutflowData.goals, monthlyDetails });
                currentPortfolio = yearEndBalance;
                currentMonthlySip *= (1 + g);
            }

            return (
                <div className="mt-4 space-y-1 animate-fade-in-up flex-1 flex flex-col overflow-hidden min-h-[350px] uppercase leading-none">
                    <div className="bg-slate-950 grid grid-cols-5 text-[10px] font-bold text-slate-400 uppercase tracking-widest pb-3 px-6 border-b border-white/10 sticky top-0 z-10 pt-2">
                        <div>Year</div><div>Age</div><div className="text-right">Yearly SIP</div><div className="text-right">Balance</div><div className="text-right">Redeem Source</div>
                    </div>
                    <div className="flex-1 overflow-y-auto custom-scrollbar pb-10 pr-2 uppercase">
                        {schedule.map((row, idx) => (
                            <div key={idx} className="mb-1">
                                <div onClick={() => setExpandedYear(expandedYear === idx ? null : idx)} className={`grid grid-cols-5 items-center p-3 px-6 rounded-2xl border border-white/5 bg-slate-900/40 cursor-pointer hover:bg-slate-800 ${row.outflow > 0 ? 'bg-rose-500/5 border-rose-500/20' : ''}`}>
                                    <div className="text-[11px] text-slate-300 font-bold flex items-center gap-2 uppercase leading-none"><Icon name={expandedYear === idx ? "chevron-up" : "chevron-down"} size={14} className="text-teal-500" /> Year {row.year}</div>
                                    <div className="text-xs font-bold text-teal-400 uppercase leading-none">{row.age}y</div>
                                    <div className="text-right text-xs font-medium text-slate-300 uppercase leading-none">₹{Math.round(row.yearlySipTotal).toLocaleString('en-IN')}</div>
                                    <div className="text-right text-sm font-black text-emerald-400 uppercase leading-none">₹{Math.round(row.portfolio).toLocaleString('en-IN')}</div>
                                    <div className="text-right text-xs font-bold text-rose-400 uppercase leading-none">
                                        {row.outflow > 0 ? (
                                            <div className="flex flex-col items-end uppercase leading-none">
                                                <span className="font-black">₹{Math.round(row.outflow).toLocaleString('en-IN')}</span>
                                                <div className="flex flex-wrap justify-end gap-1 mt-1">
                                                    {row.withdrawalGoals.map((g, gi) => (
                                                        <span key={gi} className="text-[8px] bg-rose-500/20 px-1.5 py-0.5 rounded border border-rose-500/30 whitespace-nowrap">{g.name}</span>
                                                    ))}
                                                </div>
                                            </div>
                                        ) : '—'}
                                    </div>
                                </div>
                                {expandedYear === idx && (
                                    <div className="mt-0.5 ml-8 mr-2 animate-slide-in space-y-1 py-3 border-l border-teal-500/20 pl-6 bg-slate-950/20 rounded-br-2xl uppercase leading-none">
                                        {row.monthlyDetails.map((m) => (
                                            <div key={m.month} className="grid grid-cols-4 items-center p-1.5 px-4 rounded-lg text-[10px] hover:bg-white/5 uppercase leading-none">
                                                <div className="text-slate-400 font-bold uppercase uppercase leading-none">M{m.month}</div>
                                                <div className="text-right text-slate-500 font-mono tracking-tight uppercase leading-none">₹{Math.round(m.opening).toLocaleString('en-IN')}</div>
                                                <div className="text-right text-slate-200 font-mono tracking-tight uppercase leading-none">₹{Math.round(m.contribution).toLocaleString('en-IN')}</div>
                                                <div className="text-right flex flex-col items-end uppercase leading-none"><span className="text-teal-400 font-bold uppercase leading-none">₹{Math.round(m.closing).toLocaleString('en-IN')}</span></div>
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        function ChildMilestoneRow({ title, currentAge, targetAge, baseCost, isEnabled, inflation, onUpdate, onToggle }) {
            const yearsRemaining = Math.max(0, targetAge - Number(currentAge));
            const futureCost = Number(baseCost) * Math.pow(1 + (Number(inflation) / 100), yearsRemaining);
            return (
                <div className={`relative flex flex-col p-4 rounded-3xl border transition-all duration-300 ${isEnabled ? 'bg-slate-800/60 border-teal-500/30 shadow-lg' : 'bg-slate-900/40 border-slate-800 opacity-50 grayscale'}`}>
                    <div className="flex justify-between items-start mb-3 uppercase">
                        <div className="flex items-center gap-3">
                            <div className={`p-2.5 rounded-xl ${isEnabled ? 'bg-teal-500/10 text-teal-400' : 'bg-slate-800 text-slate-500'}`}><Icon name="graduation-cap" size={20} /></div>
                            <div><h4 className="font-bold text-xs text-white leading-none mb-1 uppercase">{String(title)}</h4><p className="text-teal-500 text-[9px] font-bold uppercase tracking-widest">IN {yearsRemaining} YRS</p></div>
                        </div>
                        <div onClick={onToggle} className={`w-9 h-5 rounded-full p-0.5 cursor-pointer transition-all ${isEnabled ? 'bg-teal-600' : 'bg-slate-800 border border-slate-700'}`}><div className={`w-4 h-4 bg-white rounded-full shadow-md transition-transform ${isEnabled ? 'translate-x-4' : ''}`} /></div>
                    </div>
                    <div className="space-y-3">
                        <div className="w-full">
                            <label className="text-[9px] font-bold uppercase text-slate-400 block mb-1 tracking-wider leading-none uppercase">Base Cost (₹)</label>
                            <input type="number" value={baseCost === 0 ? '' : baseCost} onFocus={(e) => e.target.select()} onChange={(e) => onUpdate('cost', e.target.value)} className="w-full bg-slate-950 border border-white/10 text-white rounded-xl p-2.5 text-sm font-medium outline-none focus:border-teal-500 transition-all no-spinners" disabled={!isEnabled} />
                        </div>
                    </div>
                    <div className="mt-3 pt-3 border-t border-white/5 text-right">
                        <p className="text-slate-500 text-[9px] font-bold uppercase mb-0.5 tracking-wider uppercase">Future Cost</p>
                        <p className="text-xl font-black text-teal-400 tracking-tighter leading-none uppercase">₹{Math.round(futureCost).toLocaleString('en-IN')}</p>
                    </div>
                </div>
            );
        }

        // --- 5. Parent Components ---

        function SetupView({ profile, setProfile, onComplete, onBack }) {
            const [step, setStep] = useState(1);
            
            const yearlyIncomeCombined = (Number(profile.netSalary||0) + Number(profile.businessIncome||0)) * 12;
            const annualOutflow = ((Number(profile.rent||0) + Number(profile.household||0) + Number(profile.lifestyle||0)) * 12) + Number(profile.vacation||0) + Number(profile.healthPremium||0) + Number(profile.lifePremium||0);
            const totalAssets = ASSET_CLASSES.reduce((acc, a) => acc + Number(profile[a.id]||0), 0);

            const handleNext = () => {
                if (step === 1 && (Number(profile.retireAge) <= Number(profile.age) || !profile.name)) return;
                if (step < 5) setStep(step + 1); else onComplete();
                window.scrollTo(0,0);
            };

            const activeComplimentText = useMemo(() => {
                if (step === 1) return profile.name ? `WELCOME, ${profile.name.toUpperCase()}!` : "INITIATING BIOLOGICAL CALIBRATION.";
                if (step === 2) return "ANALYZING CASH FLOW & BURN RATE.";
                if (step === 3) return "CALIBRATING CURRENT ASSETS.";
                if (step === 4) return (profile.goals || []).length + " REGISTERED TARGETS.";
                return "PROTOCOL READY";
            }, [profile.name, profile.goals, step]);

            return (
                <div className="w-full max-w-5xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8 pb-32 pt-16 uppercase leading-none">
                    <div className="lg:col-span-8 animate-fade-in-up">
                        <GlassCard className="p-8 shadow-2xl">
                            <div className="flex items-center gap-5 mb-8 border-b border-white/5 pb-6 uppercase">
                                <div className="p-3 bg-teal-500/10 text-teal-400 rounded-2xl shadow-xl"><Icon name="activity" size={24} /></div>
                                <div><h2 className="text-xl font-black text-white tracking-tight mb-1">{step === 1 ? 'Personal Profile' : step === 2 ? 'Expenses & Lifestyle' : step === 3 ? 'Current Assets' : step === 4 ? 'Goal Mapping' : 'Ready'}</h2><p className="text-slate-400 text-[10px] font-bold uppercase tracking-widest leading-none">Step {step} of 5</p></div>
                            </div>

                            <form onKeyDown={(e) => { if (e.key === 'Enter') e.preventDefault(); }}>
                                {step === 1 && (
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 animate-slide-in">
                                        <div className="md:col-span-2"><ProfileInput label="Your Name" value={profile.name} onChange={(v) => setProfile({...profile, name: v})} placeholder="Full Name" iconName="user" /></div>
                                        <ProfileInput label="Current Age" value={profile.age} onChange={(v) => setProfile({...profile, age: v})} type="number" iconName="calendar" />
                                        <ProfileInput label="Retirement Age" value={profile.retireAge} onChange={(v) => setProfile({...profile, retireAge: v})} type="number" iconName="umbrella" insight={Number(profile.retireAge) <= Number(profile.age) ? "Must be > Current" : ""} />
                                        <ProfileInput label="Monthly Net Salary" value={profile.netSalary} onChange={(v) => setProfile({...profile, netSalary: v})} type="number" iconName="indian-rupee" />
                                        <ProfileInput label="Monthly Business Income" value={profile.businessIncome} onChange={(v) => setProfile({...profile, businessIncome: v})} type="number" iconName="briefcase" />
                                        <div className="md:col-span-2 pt-4 border-t border-white/5 space-y-5">
                                            <ToggleInput label="Married?" value={profile.married} onChange={(v) => setProfile({...profile, married: v, children: false})} iconName="heart" />
                                            {profile.married && <div className="animate-fade-in-up space-y-5"><ToggleInput label="Children?" value={profile.children} onChange={(v) => setProfile({...profile, children: v})} iconName="baby" />{profile.children && <ProfileInput label="Number of Children" value={profile.numChildren} onChange={(v) => setProfile({...profile, numChildren: Math.min(10, Number(v))})} type="number" iconName="users" />}</div>}
                                        </div>
                                    </div>
                                )}
                                {step === 2 && (
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 animate-slide-in uppercase">
                                        <ProfileInput label="Monthly Rent" value={profile.rent} onChange={(v) => setProfile({...profile, rent: v})} type="number" iconName="home" />
                                        <div className="space-y-3">
                                            <ProfileInput label="Monthly EMI" value={profile.emi} onChange={(v) => setProfile({...profile, emi: v})} type="number" iconName="credit-card" />
                                            {Number(profile.emi) > 0 && <div className="animate-fade-in-up"><label className="text-[9px] font-bold text-slate-400 uppercase mb-1 block tracking-wider uppercase">EMI End Year</label><select value={profile.emiEndYear} onChange={(e) => setProfile({...profile, emiEndYear: e.target.value})} className="w-full premium-input text-white rounded-xl py-2.5 px-3 text-sm outline-none uppercase"><option value="">Choose Year</option>{Array.from({length: 31}, (_, i) => new Date().getFullYear() + i).map(y => <option key={y} value={y}>{y}</option>)}</select></div>}
                                        </div>
                                        <ProfileInput label="Household" value={profile.household} onChange={(v) => setProfile({...profile, household: v})} type="number" iconName="shopping-bag" />
                                        <ProfileInput label="Lifestyle" value={profile.lifestyle} onChange={(v) => setProfile({...profile, lifestyle: v})} type="number" iconName="coffee" />
                                        <ProfileInput label="Annual Vacation" value={profile.vacation} onChange={(v) => setProfile({...profile, vacation: v})} type="number" iconName="plane" />
                                        <div className="md:col-span-2 pt-4 border-t border-white/5 space-y-5">
                                            <ToggleInput label="Are you paying any insurance premium?" value={profile.insurance} onChange={(v) => setProfile({...profile, insurance: v})} iconName="shield-check" />
                                            {profile.insurance && <div className="grid grid-cols-2 gap-6 animate-fade-in-up"><ProfileInput label="Annual Health Premium" value={profile.healthPremium} onChange={(v) => setProfile({...profile, healthPremium: v})} type="number" iconName="heart-pulse" /><ProfileInput label="Annual Life Premium" value={profile.lifePremium} onChange={(v) => setProfile({...profile, lifePremium: v})} type="number" iconName="shield" /></div>}
                                        </div>
                                    </div>
                                )}
                                {step === 3 && (
                                    <div className="animate-slide-in space-y-6 uppercase">
                                        <div className="grid grid-cols-2 gap-6">
                                            {ASSET_CLASSES.map(asset => (
                                                <ProfileInput key={asset.id} label={asset.label} value={profile[asset.id]} onChange={(v) => setProfile({...profile, [asset.id]: v})} type="number" iconName={asset.icon} fixedRate={asset.rate} />
                                            ))}
                                            <div className="md:col-span-2 pt-4 border-t border-white/5 grid grid-cols-2 gap-6"><ProfileInput label="Monthly SIP" value={profile.currentSIP} onChange={(v) => setProfile({...profile, currentSIP: v})} type="number" iconName="refresh-cw" /><ProfileInput label="Step-up SIP (%)" value={profile.stepUp} onChange={(v) => setProfile({...profile, stepUp: v})} type="number" iconName="percent" /></div>
                                        </div>
                                    </div>
                                )}
                                {step === 4 && (
                                    <div className="space-y-8 animate-slide-in uppercase">
                                        <div className="p-6 bg-purple-500/10 border border-purple-500/20 rounded-[2rem] flex items-center justify-between shadow-lg">
                                            <div className="flex items-center gap-4"><Icon name="umbrella" size={32} className="text-purple-400" /><div><h4 className="text-white font-black text-lg mb-1 leading-none uppercase">PLANNING HORIZON</h4><p className="text-slate-400 text-[10px]">Plan till age?</p></div></div>
                                            <input type="number" className="w-24 bg-slate-950 border border-slate-700 rounded-xl p-3 text-center font-bold text-xl outline-none no-spinners uppercase" value={profile.planningHorizon} onChange={(e) => setProfile({...profile, planningHorizon: e.target.value})} />
                                        </div>
                                        {profile.children && (
                                            <div className="p-6 bg-pink-500/10 border border-pink-500/20 rounded-[2.5rem] space-y-6 animate-fade-in-up">
                                                <ToggleInput label="Add Children Planning?" value={profile.childPlanningActive} onChange={(v) => setProfile({...profile, childPlanningActive: v})} iconName="baby" />
                                                {profile.childPlanningActive && [...Array(Number(profile.numChildren)||0)].map((_, i) => (
                                                    <div key={i} className="space-y-6 border-l-2 border-pink-500/20 pl-6 pb-2">
                                                        <div className="flex items-center justify-between uppercase"><h5 className="text-pink-300 font-bold text-sm uppercase">Child {i+1}</h5><input type="number" placeholder="Age" className="w-16 bg-slate-950 border border-slate-700 p-2 rounded-lg text-center text-sm" value={(profile.childAges||{})[i]||''} onChange={(e) => setProfile({...profile, childAges: {...(profile.childAges||{}), [i]: e.target.value}})} /></div>
                                                        {(profile.childAges||{})[i] && (
                                                            <div className="grid grid-cols-2 gap-4">
                                                                {BASE_MILESTONES.filter(m => m.age > (Number(profile.childAges[i]) || 0)).map((m, mIdx) => {
                                                                    const mData = (profile.childMilestoneData || {})[i]?.[m.title] || { enabled: true, cost: m.defaultCost, inflation: 8 };
                                                                    return (
                                                                        <ChildMilestoneRow 
                                                                            key={mIdx} title={m.title} currentAge={profile.childAges[i]} targetAge={m.age} baseCost={mData.cost} isEnabled={mData.enabled} inflation={mData.inflation} 
                                                                            onUpdate={(f, v) => setProfile({...profile, childMilestoneData: {...profile.childMilestoneData, [i]: {...(profile.childMilestoneData[i]||{}), [m.title]: {...mData, [f]: v}}}})}
                                                                            onToggle={() => setProfile({...profile, childMilestoneData: {...profile.childMilestoneData, [i]: {...(profile.childMilestoneData[i]||{}), [m.title]: {...mData, enabled: !mData.enabled}}}})}
                                                                        />
                                                                    );
                                                                })}
                                                            </div>
                                                        )}
                                                    </div>
                                                ))}
                                            </div>
                                        )}
                                        <div className="pt-6 border-t border-white/5">
                                            <h4 className="text-white font-bold mb-4 uppercase text-sm tracking-widest uppercase">Suggestions</h4>
                                            <div className="flex flex-wrap gap-2.5 mb-8 overflow-x-auto pb-2 hide-scroll uppercase">
                                                {QUICK_GOALS.map(goal => ( <button key={goal} type="button" onClick={() => setProfile({...profile, goals: [...(profile.goals||[]), { id: Date.now() + Math.random(), name: goal, cost: 500000, years: 10, inflation: 6 }] })} className="whitespace-nowrap px-4 py-2 border border-white/10 rounded-2xl text-[10px] font-bold text-slate-300 hover:bg-teal-500 transition-all uppercase leading-none">+ {goal}</button> ))}
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-5 uppercase leading-none">
                                                {profile.goals.map(g => (
                                                    <div key={g.id} className="p-6 bg-slate-900 border border-white/10 rounded-[2rem] relative group shadow-lg uppercase leading-none">
                                                        <button type="button" onClick={() => setProfile({...profile, goals: profile.goals.filter(x => x.id !== g.id)})} className="absolute top-5 right-5 text-rose-400 hover:scale-110 leading-none uppercase"><Icon name="trash-2" size={16}/></button>
                                                        <div className="flex items-center gap-3 mb-5"><div className="p-2.5 bg-teal-500/10 text-teal-400 rounded-xl leading-none uppercase"><Icon name="target" size={20} /></div><h5 className="text-white font-bold uppercase text-sm truncate leading-none">{g.name}</h5></div>
                                                        <div className="space-y-3">
                                                            <ProfileInput label="Cost Today" value={g.cost} onChange={(v) => setProfile({...profile, goals: profile.goals.map(x => x.id === g.id ? {...x, cost: v} : x)})} type="number" iconName="indian-rupee" />
                                                            <div className="grid grid-cols-2 gap-3 uppercase"><ProfileInput label="Years" value={g.years} onChange={(v) => setProfile({...profile, goals: profile.goals.map(x => x.id === g.id ? {...x, years: v} : x)})} type="number" iconName="calendar" /><ProfileInput label="Infl %" value={g.inflation} onChange={(v) => setProfile({...profile, goals: profile.goals.map(x => x.id === g.id ? {...x, inflation: v} : x)})} type="number" iconName="percent" /></div>
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                )}
                                {step === 5 && (
                                    <div className="flex flex-col items-center justify-center py-20 text-center animate-fade-in-up uppercase leading-none">
                                        <div className="w-24 h-24 bg-gradient-to-tr from-teal-400 to-emerald-500 rounded-[2rem] flex items-center justify-center shadow-2xl mb-8 animate-pulse shadow-teal-500/10"><Icon name="brain" size={48} className="text-white" /></div>
                                        <h2 className="text-3xl font-black text-white mb-6 uppercase tracking-tight leading-none">System Ready</h2>
                                        <button onClick={onComplete} className="px-16 py-6 bg-white text-slate-950 font-black rounded-[2.5rem] text-lg hover:scale-105 transition-all shadow-xl shadow-white/10 uppercase tracking-widest leading-none">Generate Blueprint</button>
                                    </div>
                                )}
                            </form>
                        </GlassCard>
                    </div>
                    <div className="lg:col-span-4 space-y-8 animate-fade-in-up uppercase leading-none" style={{ animationDelay: '0.1s' }}>
                        <GlassCard className="p-10 sticky top-32 text-center shadow-2xl overflow-hidden uppercase">
                            <div className="flex flex-col items-center mb-10 uppercase">
                                <div className="w-16 h-16 bg-gradient-to-tr from-teal-400 to-emerald-500 rounded-2xl flex items-center justify-center shadow-2xl mb-8 animate-pulse shadow-teal-500/10"><Icon name="brain" size={32} className="text-white uppercase" /></div>
                                <h3 className="text-white text-[10px] font-black uppercase tracking-[0.4em] opacity-60 uppercase leading-none">Intelligence</h3>
                            </div>
                            <div className="space-y-12 uppercase leading-none">
                                <div>
                                    <div className="text-2xl font-black text-white mb-3 tracking-tighter truncate"><AnimatedValue value={yearlyIncomeCombined/12} prefix="₹" /></div>
                                    <p className="text-teal-400 text-[9px] font-bold uppercase tracking-[0.25em] opacity-90 uppercase leading-none">Monthly Inflow</p>
                                </div>
                                {step >= 2 && (
                                    <div className="animate-fade-in-up">
                                        <div className="text-2xl font-black text-white mb-3 tracking-tighter truncate"><AnimatedValue value={annualOutflow/12} prefix="₹" /></div>
                                        <p className="text-rose-400 text-[9px] font-bold uppercase tracking-[0.25em] opacity-90 uppercase leading-none">Monthly Outflow</p>
                                    </div>
                                )}
                                {step >= 3 && (
                                    <div className="animate-fade-in-up">
                                        <div className="text-2xl font-black text-white mb-3 tracking-tighter truncate"><AnimatedValue value={totalAssets} prefix="₹" /></div>
                                        <p className="text-indigo-400 text-[9px] font-bold uppercase tracking-[0.25em] opacity-90 uppercase leading-none">Current Assets</p>
                                    </div>
                                )}
                                <div className="pt-8 border-t border-white/10 text-[9px] font-bold italic text-slate-300 uppercase opacity-60 leading-relaxed uppercase leading-none">"{String(activeComplimentText)}"</div>
                            </div>
                        </GlassCard>
                    </div>
                    <BottomTaskbar onNext={handleNext} onBack={() => step > 1 ? setStep(step-1) : onBack()} showBack={step > 1} progress={Math.round((step / 5) * 100)} label={step === 5 ? "Deploy Blueprint" : "Continue"} />
                </div>
            );
        }

        function BlueprintView({ profile, onEdit }) {
            const [journeyExpanded, setJourneyExpanded] = useState(false);
            const [isDeployingWealth, setIsDeployingWealth] = useState(false);
            const [wealthAllocations, setWealthAllocations] = useState({});
            const [customParams, setCustomParams] = useState({});
            const [activeGoalId, setActiveGoalId] = useState(null);
            const [allocationExpanded, setAllocationExpanded] = useState(true);
            const [activeTab, setActiveTab] = useState('strategy'); 

            const netWorth = ASSET_CLASSES.reduce((acc, a) => acc + Number(profile[a.id]||0), 0);
            const age = Number(profile.age);
            const retireAge = Number(profile.retireAge);
            const retireYrs = Math.max(1, retireAge - age);
            const monthlyLifestyle = (Number(profile.rent||0) + Number(profile.household||0) + Number(profile.lifestyle||0));
            const futureLifestyle = monthlyLifestyle * Math.pow(1.06, retireYrs);
            const retireCorpusValue = futureLifestyle * 12 * 25;

            const plan = useMemo(() => {
                const schedule = {};
                const addSch = (yr, name, amt) => { if(!schedule[yr]) schedule[yr] = {total: 0, goals: []}; schedule[yr].total += amt; schedule[yr].goals.push({name, amount: amt}); };
                const ledger = [ { id: 'retirement', name: 'Retirement Protocol', corpus: retireCorpusValue, years: retireYrs, icon: "umbrella" } ];
                
                (profile.goals || []).forEach(g => {
                    const futureCost = Number(g.cost) * Math.pow(1 + (Number(g.inflation)/100), Number(g.years));
                    ledger.push({ ...g, corpus: futureCost, icon: "target" });
                });

                const ledgerWithCalculations = ledger.map(goal => {
                    const params = customParams[goal.id] || { returns: 12, stepUp: 0, lumpsum: 0 };
                    const allocLumpsum = isDeployingWealth ? (netWorth * (wealthAllocations[goal.id] || 0) / 100) : 0;
                    const totalLumpsum = Number(params.lumpsum) + allocLumpsum;
                    const sip = calculateStepUpSip(goal.corpus, goal.years, params.returns, params.stepUp, totalLumpsum);
                    addSch(goal.years, goal.name, goal.corpus);
                    return { ...goal, ...params, sip, totalLumpsum, allocatedWealth: allocLumpsum };
                });

                const annualInflow = (Number(profile.netSalary) + Number(profile.businessIncome)) * 12;
                const recommendedMultiplier = (age < 35 ? 30 : age < 45 ? 20 : 10);
                const lifeCover = Math.min(annualInflow * 20, annualInflow * recommendedMultiplier);
                const healthCover = Math.max(1000000, 500000 + (profile.married ? 500000 : 0) + ((Number(profile.numChildren)||0)*300000) + (monthlyLifestyle * 12 * 0.5));

                return { ledger: ledgerWithCalculations, schedule, totalSIP: ledgerWithCalculations.reduce((s, x) => s + x.sip, 0), lifeCover, healthCover, recommendedLife: annualInflow * recommendedMultiplier };
            }, [profile, wealthAllocations, customParams, isDeployingWealth, netWorth, retireCorpusValue, retireYrs, age, monthlyLifestyle]);

            const handleCSVExport = () => {
                let csv = "Year,Age,Monthly SIP,Yearly SIP,End Balance,Withdrawal,Source\n";
                const years = Math.max(0, Number(profile.planningHorizon) - age);
                const r = 12 / 100 / 12;
                let currentPortfolio = netWorth;
                let currentMonthlySip = plan.totalSIP;
                for (let yr = 0; yr <= years; yr++) {
                    const cAge = age + yr;
                    const outflowData = plan.schedule[yr] || { total: 0, goals: [] };
                    for (let m = 1; m <= 12; m++) currentPortfolio = (currentPortfolio + currentMonthlySip) * (1 + r);
                    const sources = outflowData.goals.map(g => g.name).join(' | ');
                    csv += `${yr+1},${cAge},${Math.round(currentMonthlySip)},${Math.round(currentMonthlySip * 12)},${Math.round(currentPortfolio)},${Math.round(outflowData.total)},"${sources}"\n`;
                    currentPortfolio = Math.max(0, currentPortfolio - outflowData.total);
                }
                const blob = new Blob([csv], { type: 'text/csv' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.setAttribute('href', url); a.setAttribute('download', 'Wealth_Simulation.csv'); a.click();
            };

            const updateAllocation = (id, val) => {
                const numericVal = Math.min(100, Math.max(0, Number(val)));
                const currentOtherTotal = Object.entries(wealthAllocations).filter(([k]) => k !== id).reduce((s, [,v]) => s+v, 0);
                setWealthAllocations(prev => ({ ...prev, [id]: Math.min(numericVal, 100 - currentOtherTotal) }));
            };

            const handlePDFExport = () => { window.print(); };

            return (
                <div className="max-w-6xl mx-auto p-8 pt-32 animate-fade-in-up uppercase leading-none print:p-0 print:max-w-none">
                    {journeyExpanded && (
                        <div className="fixed inset-0 z-[2000] flex items-start justify-center p-6 overflow-y-auto uppercase leading-none no-print">
                            <div className="fixed inset-0 bg-slate-950/95 backdrop-blur-3xl uppercase leading-none" onClick={() => setJourneyExpanded(false)} />
                            <GlassCard className="w-full max-w-5xl !bg-slate-900 border-teal-500/30 flex flex-col p-0 shadow-[0_0_100px_rgba(0,0,0,1)] relative mt-10 uppercase">
                                <div className="flex justify-between items-center p-8 border-b border-white/10 bg-slate-900/50 uppercase leading-none">
                                    <div className="flex items-center gap-5 uppercase leading-none">
                                        <div className="p-3 bg-teal-500/20 text-teal-400 rounded-xl uppercase leading-none"><Icon name="map" size={24} /></div>
                                        <div><h4 className="text-2xl font-black text-white uppercase uppercase leading-none">Flow Audit</h4><p className="text-slate-400 text-[10px] font-bold uppercase uppercase leading-none uppercase leading-none">Full lifecycle simulation</p></div>
                                    </div>
                                    <div className="flex items-center gap-4 uppercase leading-none">
                                        <button onClick={handleCSVExport} className="flex items-center gap-2 px-4 py-2 bg-white/5 text-white rounded-xl border border-white/10 text-[10px] font-bold transition-all uppercase leading-none uppercase leading-none"><Icon name="download" size={14} /> EXCEL</button>
                                        <button onClick={() => setJourneyExpanded(false)} className="w-10 h-10 flex items-center justify-center rounded-xl bg-slate-800 border border-white/10 hover:text-white transition-all uppercase leading-none"><Icon name="x" size={20}/></button>
                                    </div>
                                </div>
                                <div className="p-10 uppercase leading-none">
                                    <div className="grid grid-cols-3 gap-6 mb-10 p-6 bg-slate-950/50 border border-white/5 rounded-2xl uppercase leading-none">
                                        <ProfileInput label="Simulated Lumpsum" value={customParams.globalLumpsum || netWorth} onChange={(v) => setCustomParams({...customParams, globalLumpsum: v})} type="number" iconName="coins" />
                                        <ProfileInput label="Target Returns %" value={customParams.globalReturns || 12} onChange={(v) => setCustomParams({...customParams, globalReturns: v})} type="number" iconName="trending-up" />
                                        <ProfileInput label="Step-Up %" value={customParams.globalStepUp || 0} onChange={(v) => setCustomParams({...customParams, globalStepUp: v})} type="number" iconName="percent" />
                                    </div>
                                    <FullJourneySchedule startAge={age} endAge={profile.planningHorizon} initialSip={plan.totalSIP} stepUpRate={customParams.globalStepUp || 0} expectedReturn={customParams.globalReturns || 12} outflows={plan.schedule} lumpsum={customParams.globalLumpsum || netWorth} />
                                </div>
                            </GlassCard>
                        </div>
                    )}
                    
                    <div className="flex justify-between items-end mb-16 no-print uppercase leading-none">
                        <div className="flex gap-4">
                            <button onClick={() => setActiveTab('strategy')} className={`px-8 py-3 rounded-xl font-bold text-[10px] uppercase tracking-widest transition-all ${activeTab === 'strategy' ? 'bg-teal-600 text-white shadow-lg' : 'bg-slate-800 text-slate-400'}`}>Strategy Blueprint</button>
                            {!isDeployingWealth && <button onClick={() => setActiveTab('flow')} className={`px-8 py-3 rounded-xl font-bold text-[10px] uppercase tracking-widest transition-all ${activeTab === 'flow' ? 'bg-teal-600 text-white shadow-lg' : 'bg-slate-800 text-slate-400'}`}>Existing Wealth Flow</button>}
                        </div>
                        <div className="flex gap-4 uppercase leading-none">
                            <button onClick={handlePDFExport} className="px-8 py-3 bg-teal-600/10 border border-teal-500/30 rounded-xl text-teal-400 font-bold text-xs uppercase shadow-md flex items-center gap-3 uppercase leading-none"><Icon name="printer" size={16} /> Export Strategy</button>
                            <button onClick={onEdit} className="px-8 py-3 bg-white text-slate-950 rounded-xl font-bold text-xs uppercase shadow-md flex items-center gap-3 uppercase leading-none"><Icon name="edit-3" size={16} /> Edit Inputs</button>
                        </div>
                    </div>

                    {activeTab === 'strategy' ? (
                        <div className="space-y-12 uppercase leading-none">
                            <GlassCard className="p-12 border-teal-500/20 shadow-glow uppercase leading-none">
                                <h3 className="text-teal-400 font-bold text-sm uppercase tracking-[0.5em] mb-10 leading-none uppercase leading-none">Client Input Profile</h3>
                                <div className="space-y-8 text-xl leading-relaxed text-slate-100 font-medium normal-case uppercase leading-none">
                                    <p>Hi <span className="text-teal-400 font-black uppercase leading-none">{profile.name || 'User'}</span>, you are currently <span className="text-white font-black uppercase leading-none">{age} years old</span>.</p>
                                    <p>You have declared a monthly income of <span className="text-emerald-400 font-black uppercase leading-none">₹{Number(profile.netSalary).toLocaleString('en-IN')}</span> and business income of <span className="text-emerald-400 font-black uppercase leading-none">₹{Number(profile.businessIncome).toLocaleString('en-IN')}</span>. </p>
                                    <p>Your current monthly lifestyle burn rate is <span className="text-rose-400 font-black uppercase leading-none">₹{monthlyLifestyle.toLocaleString('en-IN')}</span>, and you carry a monthly debt obligation (EMI) of <span className="text-rose-400 font-black uppercase leading-none">₹{Number(profile.emi||0).toLocaleString('en-IN')}</span>.</p>
                                    <p>You plan to retire at <span className="text-indigo-400 font-black uppercase leading-none">{retireAge}</span>, with your final planning horizon set to age <span className="text-indigo-400 font-black uppercase">{profile.planningHorizon}</span>. Your current assets total <span className="text-teal-400 font-black uppercase">₹{netWorth.toLocaleString('en-IN')}</span>.</p>
                                </div>
                            </GlassCard>

                            <div className="bg-slate-900 border border-white/10 rounded-[3.5rem] p-12 shadow-2xl relative overflow-hidden uppercase leading-none">
                                <div className="flex items-center gap-5 mb-10 border-b border-white/5 pb-8 uppercase">
                                    <div className="p-5 bg-teal-500/20 text-teal-400 rounded-3xl shadow-xl leading-none uppercase leading-none uppercase leading-none"><Icon name="activity" size={32} /></div>
                                    <h3 className="text-3xl font-black text-white tracking-tight uppercase uppercase leading-none">Economic Engine</h3>
                                </div>
                                <div className="grid grid-cols-1 lg:grid-cols-2 gap-16 uppercase leading-none">
                                    <div className="space-y-10 uppercase leading-none">
                                        <div className="space-y-4 uppercase leading-none">
                                            <h4 className="text-teal-400 font-bold text-xs uppercase tracking-widest uppercase leading-none uppercase leading-none">Current Reality</h4>
                                            <p className="text-slate-200 text-2xl leading-snug font-medium uppercase leading-none uppercase leading-none">Your current lifestyle expenses are <span className="text-white font-black uppercase leading-none">₹{monthlyLifestyle.toLocaleString('en-IN')}</span> / month.</p>
                                            <p className="text-slate-400 text-xs uppercase leading-none uppercase leading-none uppercase leading-none uppercase leading-none">This represents the cost of maintaining the lifestyle you live today.</p>
                                        </div>
                                        <div className="space-y-4 uppercase leading-none">
                                            <h4 className="text-indigo-400 font-bold text-xs uppercase tracking-widest uppercase leading-none uppercase leading-none">Future Need</h4>
                                            <p className="text-slate-300 text-2xl leading-snug font-medium uppercase leading-none uppercase leading-none uppercase leading-none">After adjusting for 6% inflation, you will require approximately <span className="text-white font-black uppercase leading-none uppercase leading-none">₹{Math.round(futureLifestyle).toLocaleString('en-IN')}</span> / month after retirement.</p>
                                            <p className="text-rose-400 text-lg block mt-2 font-bold italic uppercase leading-none uppercase leading-none uppercase leading-none uppercase leading-none">"I will eat half your money in 10 years." — Mr. Inflation</p>
                                        </div>
                                    </div>
                                    <div className="space-y-10 border-l border-white/10 pl-16 uppercase leading-none">
                                        <div className="p-8 bg-slate-950 rounded-3xl border border-teal-500/20 shadow-inner uppercase leading-none uppercase leading-none">
                                            <h4 className="text-teal-400 font-bold text-xs uppercase tracking-widest mb-4 uppercase leading-none">The Foundation</h4>
                                            <p className="text-white text-2xl font-black mb-3 uppercase leading-none uppercase leading-none uppercase leading-none">₹{Math.round(retireCorpusValue).toLocaleString('en-IN')}</p>
                                            <p className="text-slate-400 text-[10px] uppercase leading-relaxed uppercase leading-none uppercase leading-none uppercase leading-none">This amount is your basic retirement requirement. The minimum monthly income you must secure first before planning for any other goals.</p>
                                        </div>
                                        <div className="space-y-4 uppercase leading-none">
                                            <h4 className="text-emerald-400 font-bold text-xs uppercase tracking-widest uppercase leading-none uppercase leading-none uppercase leading-none">Action Plan</h4>
                                            <p className="text-slate-100 text-xl leading-snug uppercase leading-none uppercase leading-none uppercase leading-none">To build this basic retirement corpus, you need to invest <span className="text-teal-400 font-black uppercase leading-none uppercase leading-none">₹{Math.round(calculateStepUpSip(retireCorpusValue, retireYrs, 12, 0, 0)).toLocaleString('en-IN')}</span> / month through SIP.</p>
                                            <p className="text-slate-500 text-[11px] font-bold uppercase leading-none">"Once this core retirement need is secured, we will then plan for your other goals such as travel, home, or lifestyle upgrades."</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div className="bg-slate-950 border border-teal-500/30 rounded-[3.5rem] p-12 shadow-2xl mb-12 relative uppercase leading-none">
                                <div className="flex flex-col md:flex-row justify-between items-center mb-12 gap-8 border-b border-white/5 pb-10 uppercase leading-none">
                                    <h3 className="text-3xl font-black text-teal-400 uppercase tracking-tight flex items-center gap-5 uppercase leading-none uppercase leading-none"><Icon name="scale" size={32} /> Do you want to allocate existing wealth to any of your goal?</h3>
                                    <div className="text-right uppercase leading-none uppercase leading-none"><p className="text-[10px] text-slate-300 font-bold uppercase mb-2 opacity-70 uppercase leading-none uppercase leading-none uppercase leading-none">Total reservoir</p><p className="text-4xl font-black text-white tracking-tighter uppercase leading-none uppercase leading-none uppercase leading-none">₹{netWorth.toLocaleString('en-IN')}</p></div>
                                </div>
                                <div className="flex items-center justify-between p-8 bg-slate-900 rounded-[2.5rem] border border-white/10 shadow-xl uppercase leading-none">
                                    <div className="flex-1 mr-8 uppercase leading-none uppercase leading-none"><ToggleInput label={`Activate Goal-Wealth Linking?`} value={isDeployingWealth} onChange={setIsDeployingWealth} iconName="zap" /></div>
                                    {isDeployingWealth && <button onClick={() => setAllocationExpanded(!allocationExpanded)} className="w-10 h-10 flex items-center justify-center bg-teal-500/10 border border-teal-500/30 rounded-xl text-teal-400 hover:bg-teal-500/20 transition-all uppercase leading-none uppercase leading-none"><Icon name={allocationExpanded ? "chevron-up" : "chevron-down"} size={20} /></button>}
                                </div>
                                {isDeployingWealth && allocationExpanded && (
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mt-12 animate-fade-in-up uppercase leading-none">
                                        {ASSET_CLASSES.map(asset => (
                                            <div key={asset.id} className="p-8 bg-slate-900 border border-white/10 rounded-[2.5rem] shadow-lg uppercase leading-none">
                                                <div className="flex justify-between items-center mb-6 uppercase leading-none">
                                                    <label className="text-[10px] font-black text-slate-300 uppercase leading-none uppercase leading-none">{asset.label}</label>
                                                    <span className="text-[9px] font-black text-teal-400 bg-teal-400/10 px-2 py-0.5 rounded uppercase leading-none uppercase leading-none uppercase leading-none">RET: {asset.rate}%</span>
                                                </div>
                                                <p className="text-lg font-black text-white uppercase leading-none uppercase leading-none">₹{Number(profile[asset.id]||0).toLocaleString('en-IN')}</p>
                                            </div>
                                        ))}
                                        {plan.ledger.map(goal => (
                                            <div key={goal.id} className="p-8 bg-slate-800 border border-teal-500/20 rounded-[2.5rem] shadow-lg uppercase leading-none">
                                                <label className="text-[10px] font-black text-teal-400 uppercase block mb-6 leading-none uppercase leading-none">{String(goal.name)} Link %</label>
                                                <div className="space-y-4 uppercase leading-none">
                                                    <input type="number" onChange={(e) => updateAllocation(goal.id, e.target.value)} value={wealthAllocations[goal.id] || ''} className="w-full allocation-input rounded-xl p-4 text-xl font-bold text-center outline-none shadow-md uppercase leading-none" placeholder="%" />
                                                    <div className="text-center uppercase leading-none"><p className="text-[10px] text-slate-400 font-bold uppercase leading-none">Allocated: ₹{Math.round(netWorth * (wealthAllocations[goal.id] || 0) / 100).toLocaleString('en-IN')}</p></div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>

                            <div className="bg-slate-900 border border-white/10 rounded-[3.5rem] p-12 shadow-2xl mb-16 relative uppercase leading-none">
                                <div className="flex flex-col md:flex-row justify-between items-center mb-12 border-b border-white/5 pb-10 uppercase leading-none">
                                    <h3 className="text-3xl font-black text-white uppercase tracking-tight uppercase leading-none">Investment Ledger</h3>
                                    <div className="text-right uppercase leading-none uppercase leading-none uppercase leading-none"><p className="text-[10px] text-slate-300 font-bold uppercase mb-2 opacity-80 uppercase leading-none uppercase leading-none">MONTHLY COMMITMENT</p><p className="text-5xl font-black text-teal-400 tracking-tighter uppercase leading-none uppercase leading-none">₹{Math.round(plan.totalSIP).toLocaleString('en-IN')}</p></div>
                                </div>
                                <div className="space-y-4 pb-12 uppercase leading-none">
                                    <div className="flex items-center gap-3 mb-6 bg-teal-500/10 p-4 rounded-2xl border border-teal-500/20 text-teal-400 font-bold text-xs uppercase tracking-widest no-print uppercase leading-none">
                                        <Icon name="info" />
                                        <span>Click any goal below to expand and audit its individual growth flow and redemption schedule.</span>
                                    </div>
                                    <button onClick={() => { setJourneyExpanded(true); window.scrollTo(0,0); }} className="w-full mb-16 flex items-center justify-between p-8 bg-teal-500/10 rounded-[3rem] border border-teal-500/30 hover:bg-teal-500/20 transition-all group shadow-glow no-print uppercase leading-none uppercase leading-none">
                                        <div className="flex items-center gap-6 text-left uppercase leading-none uppercase leading-none uppercase leading-none"><div className="p-4 bg-teal-500/20 text-teal-400 rounded-2xl shadow-xl leading-none uppercase leading-none uppercase leading-none uppercase leading-none uppercase leading-none"><Icon name="map" size={32} /></div><div><h4 className="text-2xl font-black text-white uppercase tracking-tight mb-1 uppercase leading-none uppercase leading-none">Wealth Flow Audit</h4><p className="text-teal-400 text-xs font-bold uppercase tracking-widest opacity-90 uppercase leading-none uppercase leading-none uppercase leading-none">Lifecycle Simulation: Redemptions and Compounding</p></div></div>
                                        <Icon name="arrow-right" size={32} className="text-teal-400 group-hover:translate-x-4 transition-transform uppercase leading-none" />
                                    </button>
                                    {plan.ledger.map((item) => { 
                                        const isExp = activeGoalId === item.id; 
                                        return (
                                            <div key={item.id} className={`p-2 rounded-[3rem] border transition-all ${isExp ? 'border-teal-500/40 bg-slate-800/30 shadow-xl' : 'border-white/5 bg-transparent'} uppercase leading-none`}>
                                                <LedgerRowComponent icon={item.id === 'retirement' ? 'umbrella' : 'target'} milestone={item.name} corpus={item.corpus} sip={item.sip} cumulativeSip={0} onClick={() => setActiveGoalId(isExp ? null : item.id)} isExpanded={isExp} />
                                                {isExp && (
                                                    <div className="p-10 space-y-10 animate-fade-in-up uppercase leading-none">
                                                        <div className="grid grid-cols-1 md:grid-cols-3 gap-8 bg-slate-950/50 p-8 rounded-[2.5rem] border border-white/5 uppercase leading-none uppercase leading-none">
                                                            <div><label className="text-[10px] font-bold text-slate-300 uppercase block mb-3 uppercase leading-none uppercase leading-none">Manual Lumpsum (₹)</label><input type="number" onChange={(e) => setCustomParams({...customParams, [item.id]: {...(customParams[item.id]||{}), lumpsum: Number(e.target.value)}})} className="w-full bg-slate-800 border border-white/10 rounded-2xl p-4 text-lg font-bold outline-none uppercase leading-none uppercase leading-none" placeholder="0" /></div>
                                                            <div><label className="text-[10px] font-bold text-slate-300 uppercase block mb-3 uppercase leading-none uppercase leading-none">Target Returns %</label><input type="number" value={item.returns || 12} onChange={(e) => setCustomParams({...customParams, [item.id]: {...(customParams[item.id]||{}), returns: Number(e.target.value)}})} className="w-full bg-slate-800 border border-white/10 rounded-2xl p-4 text-lg font-bold outline-none uppercase leading-none uppercase leading-none" /></div>
                                                            <div><label className="text-[10px] font-bold text-slate-300 uppercase block mb-3 uppercase leading-none uppercase leading-none">Step-Up %</label><input type="number" value={item.stepUp || 0} onChange={(e) => setCustomParams({...customParams, [item.id]: {...(customParams[item.id]||{}), stepUp: Number(e.target.value)}})} className="w-full bg-slate-800 border border-white/10 rounded-2xl p-4 text-lg font-bold outline-none uppercase leading-none uppercase leading-none" placeholder="0" /></div>
                                                        </div>
                                                        <FullJourneySchedule startAge={age} endAge={age + item.years} initialSip={item.sip} stepUpRate={item.stepUp || 0} expectedReturn={item.returns || 12} outflows={{ [item.years]: { total: item.corpus, goals: [{name: item.name, amount: item.corpus}] } }} lumpsum={item.totalLumpsum} />
                                                    </div>
                                                )}
                                            </div>
                                        ); 
                                    })}
                                </div>
                            </div>
                        </div>
                    ) : (
                        /* Existing Wealth Flow View */
                        <div className="space-y-12 animate-fade-in-up uppercase leading-none">
                            <GlassCard className="p-14 border-white/5 shadow-2xl uppercase leading-none uppercase leading-none uppercase leading-none">
                                <div className="flex justify-between items-center mb-12 border-b border-white/5 pb-8 uppercase leading-none">
                                    <h3 className="text-3xl font-black text-white uppercase tracking-tight leading-none uppercase leading-none uppercase leading-none uppercase leading-none">Existing Wealth Flow (Autopilot)</h3>
                                    <div className="text-right uppercase leading-none uppercase leading-none uppercase leading-none uppercase leading-none"><p className="text-[10px] text-slate-300 font-bold uppercase mb-2 opacity-70 uppercase leading-none uppercase leading-none uppercase leading-none">Total reservoir</p><p className="text-4xl font-black text-teal-400 tracking-tighter uppercase leading-none uppercase leading-none uppercase leading-none">₹{netWorth.toLocaleString('en-IN')}</p></div>
                                </div>
                                <div className="grid grid-cols-2 lg:grid-cols-3 gap-10 uppercase leading-none uppercase leading-none">
                                    {ASSET_CLASSES.map(asset => {
                                        const val = Number(profile[asset.id]||0);
                                        if (val <= 0) return null;
                                        const horizon = Math.max(0, Number(profile.planningHorizon) - age);
                                        const futureVal = val * Math.pow(1 + (asset.rate/100), horizon);
                                        return (
                                            <div key={asset.id} className="p-10 bg-slate-950 rounded-[3rem] border border-white/10 shadow-inner uppercase leading-none">
                                                <p className="text-[11px] font-bold text-slate-400 mb-4 uppercase leading-none uppercase leading-none">{asset.label} ({asset.rate}%)</p>
                                                <p className="text-3xl font-black text-teal-400 uppercase leading-none uppercase leading-none">₹{Math.round(futureVal).toLocaleString('en-IN')}</p>
                                                <p className="text-[10px] text-slate-500 mt-3 uppercase leading-none uppercase leading-none">Estimated value at age {profile.planningHorizon}</p>
                                            </div>
                                        );
                                    })}
                                </div>
                                <div className="mt-12 pt-8 border-t border-white/5 text-center uppercase leading-none uppercase leading-none">
                                    <p className="text-slate-400 text-sm uppercase font-bold tracking-widest leading-none">This represents the natural compounding of your existing assets without any further contributions.</p>
                                </div>
                            </GlassCard>
                        </div>
                    )}
                    <div className="h-24 no-print" />
                </div>
            );

            function updateMilestoneParam(id, field, value) {
                setCustomParams(prev => ({ ...prev, [id]: { ...(prev[id]||{}), [field]: Number(value) } }));
            }
        }

        // --- 6. Main App Component ---

        function App() {
            const [view, setView] = useState('cover');
            const [profile, setProfile] = useState({ name: '', age: '', retireAge: 60, planningHorizon: 100, netSalary: '', businessIncome: '', rent: '', emi: '', emiEndYear: '', household: '', lifestyle: '', vacation: '', insurance: true, healthPremium: '', lifePremium: '', mfPool: '', stockPool: '', debtPool: '', cashBank: '', fdPool: '', realAssets: '', expectedReturn: 12, currentSIP: '', stepUp: 0, married: false, children: false, numChildren: 0, childPlanningActive: false, childAges: {}, childMilestoneData: {}, goals: [] });
            return (
                <div className="relative min-h-screen w-full bg-[#000a0a] overflow-x-hidden text-slate-200 uppercase leading-none">
                    <div className="fixed inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-[#003d38] via-[#000a0a] to-[#000505] -z-20" />
                    <div className="fixed inset-0 w-full h-full overflow-hidden pointer-events-none z-0"><InteractiveHDBackground /></div>
                    
                    {(view === 'profile-setup' || view === 'blueprint') && (
                        <nav className="fixed-taskbar left-0 right-0 flex items-center justify-between p-8 bg-slate-900/80 backdrop-blur-2xl border-b border-white/10 shadow-2xl no-print uppercase leading-none">
                            <div className="flex items-center gap-5 cursor-pointer uppercase leading-none" onClick={() => setView('cover')}><div className="w-12 h-12 bg-teal-50 rounded-2xl flex items-center justify-center shadow-lg leading-none uppercase leading-none uppercase leading-none"><Icon name="brain" size={28} className="text-slate-950 uppercase" /></div><div className="flex flex-col uppercase leading-none uppercase leading-none"><span className="font-black text-xl text-white tracking-tight leading-none uppercase leading-none">Financial Brain</span><span className="text-[9px] text-teal-500 font-bold uppercase tracking-[0.3em] mt-1 leading-none uppercase leading-none uppercase leading-none">Powered by BABA Tools</span></div></div>
                            <div className="flex items-center gap-6 uppercase leading-none uppercase leading-none">{profile.name && <div className="hidden lg:block px-8 py-3 bg-teal-500/10 border border-teal-500/20 rounded-2xl text-teal-400 text-base font-bold shadow-inner uppercase leading-none uppercase leading-none uppercase leading-none">{String(profile.name)}</div>}</div>
                        </nav>
                    )}

                    {view === 'cover' && (
                        <div className="absolute inset-0 z-50 flex items-center justify-center p-8 uppercase leading-none uppercase leading-none uppercase leading-none">
                            <div className="relative w-full max-w-[460px] bg-slate-900/80 backdrop-blur-3xl border border-white/10 p-12 rounded-[3.5rem] shadow-2xl text-center animate-fade-in-up uppercase leading-none uppercase leading-none center-glow">
                                <div className="flex flex-col items-center mb-8 uppercase leading-none uppercase leading-none uppercase leading-none"><div className="w-20 h-20 bg-white rounded-3xl flex items-center justify-center shadow-2xl mb-6 shadow-white/5 uppercase leading-none leading-none uppercase leading-none leading-none uppercase leading-none"><div className="w-10 h-10 bg-gradient-to-tr from-teal-500 to-emerald-600 rounded-full shadow-lg uppercase leading-none uppercase leading-none uppercase leading-none uppercase leading-none" /></div><h1 className="text-white font-black text-4xl tracking-[0.25em] uppercase leading-none uppercase leading-none uppercase leading-none uppercase leading-none uppercase leading-none uppercase leading-none">Financial Brain</h1><span className="text-[10px] text-teal-400 font-bold uppercase tracking-[0.5em] mt-5 opacity-80 leading-none uppercase leading-none uppercase leading-none uppercase leading-none uppercase leading-none uppercase leading-none uppercase leading-none">Powered by BABA Tools</span></div>
                                <h2 className="text-3xl font-bold text-white mb-10 tracking-tighter leading-[1.1] uppercase leading-none uppercase leading-none uppercase leading-none uppercase leading-none uppercase leading-none">Map Your Wealth Destiny</h2>
                                <button onClick={() => setView('profile-setup')} className="w-full py-6 bg-white text-teal-950 font-bold rounded-[2.5rem] text-lg hover:scale-[1.03] active:scale-[0.98] transition-all flex items-center justify-center gap-4 group shadow-2xl uppercase tracking-tighter leading-none uppercase uppercase leading-none uppercase leading-none uppercase leading-none uppercase leading-none uppercase leading-none uppercase leading-none">Initialize Protocol <Icon name="chevron-right" size={24} /></button>
                            </div>
                        </div>
                    )}
                    {view === 'profile-setup' && (
                        <div className="relative z-50 w-full pt-32 uppercase leading-none uppercase leading-none uppercase leading-none">
                            <SetupView profile={profile} setProfile={setProfile} onComplete={() => setView('blueprint')} onBack={() => setView('cover')} />
                        </div>
                    )}
                    {view === 'blueprint' && (
                        <div className="relative z-50 w-full pt-32 uppercase leading-none uppercase leading-none uppercase leading-none">
                            <BlueprintView profile={profile} onEdit={() => setView('profile-setup')} />
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>